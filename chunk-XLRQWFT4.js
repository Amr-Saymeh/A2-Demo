import{$ as _,$b as $,Ca as F,Cd as ae,Ea as r,Ec as H,Fc as J,Hb as B,Jb as d,Jc as w,Kb as y,Lb as h,Mc as X,Nc as te,Oa as E,Ob as j,Pb as q,Pc as ie,Qb as z,Tc as ne,Ua as U,Wc as oe,Xb as Y,Zb as T,_ as p,cd as re,db as D,eb as L,fb as b,gb as f,hb as R,ib as N,jb as V,kb as v,lb as c,mb as s,nb as W,rb as A,tb as g,vb as l,xa as Q,xc as K,zc as G}from"./chunk-SDP4DOHH.js";import{a as k,d as Z,f as S,h as ee,j as O}from"./chunk-PGPO4HR4.js";import"./chunk-I45V2STG.js";import{e as P}from"./chunk-46AQF2XH.js";var ce=(a,i,e)=>({"badge-unordered":a,"badge-ordered":i,"badge-done":e});function le(a,i){if(a&1&&(c(0,"span",34),d(1),s()),a&2){let e=l().$implicit;r(),h(" +\u20AA",e.add)}}function de(a,i){if(a&1){let e=A();c(0,"span",33),g("click",function(){let n=p(e).$index,o=l(2).$implicit,m=l(2);return _(m.selectChoiceForOrder(o,n))}),d(1),b(2,le,2,1,"span",34),s()}if(a&2){let e=i.$implicit,t=i.$index,n=l(2).$implicit,o=l(2);B("active",o.getSelectedChoiceIndex(n)===t),r(),y(e.label),r(),f(e.add?2:-1)}}function me(a,i){if(a&1&&(c(0,"div",21),N(1,de,3,4,"span",32,R),s()),a&2){let e=l().$implicit,t=l(2);r(),V(t.getChoiceDisplayStructured(e.item.name))}}function ue(a,i){if(a&1){let e=A();c(0,"div",31)(1,"textarea",35),z("ngModelChange",function(n){p(e);let o=l().$implicit,m=l(2);return q(m.notesDrafts[o.key],n)||(m.notesDrafts[o.key]=n),_(n)}),g("blur",function(){p(e);let n=l().$implicit,o=l(2);return _(o.saveNotes(n.key,o.notesDrafts[n.key],!1))}),s()()}if(a&2){let e=l().$implicit,t=l(2);r(),v("placeholder",t.isArabic?"\u0623\u0636\u0641 \u0645\u0644\u0627\u062D\u0638\u0627\u062A...":"Add notes..."),j("ngModel",t.notesDrafts[e.key])}}function pe(a,i){if(a&1){let e=A();c(0,"article",14)(1,"img",15),g("click",function(){let n=p(e).$implicit,o=l(2);return _(o.openOrderModal(n))}),s(),c(2,"div",16)(3,"div",17)(4,"div",18),d(5),c(6,"span",19),d(7),s()(),c(8,"div",20),d(9),T(10,"number"),s()(),b(11,me,3,0,"div",21),c(12,"div",22)(13,"div",23)(14,"div",24)(15,"button",25),g("click",function(){let n=p(e).$implicit,o=l(2);return _(o.dec(n.key,n.item.quantity||1,!1))}),d(16,"\u2212"),s(),c(17,"input",26),g("change",function(n){let o=p(e).$implicit,m=l(2);return _(m.setQty(o.key,+n.target.value))}),s(),c(18,"button",27),g("click",function(){let n=p(e).$implicit,o=l(2);return _(o.inc(n.key,n.item.quantity||1,!1))}),d(19,"+"),s()(),c(20,"button",28),g("click",function(){let n=p(e).$implicit,o=l(2);return _(o.toggleNotes(n.key))}),d(21),s()(),c(22,"div",29)(23,"button",30),g("click",function(){let n=p(e).$implicit,o=l(2);return _(o.remove(n.key,!1))}),d(24),s()()(),b(25,ue,2,2,"div",31),s()()}if(a&2){let e=i.$implicit,t=l(2);r(),v("src",t.getItemImage(e.item.name)||"",F),r(4),h(" ",t.displayName(e.item.name)," "),r(2),y(t.isArabic?"\u0641\u064A \u0627\u0644\u0633\u0644\u0629":"In cart"),r(2),h("",$(10,9,t.getUnitPrice(e),"1.0-2"),"\u20AA"),r(2),f(t.hasChoicesForOrder(e)?11:-1),r(6),v("value",e.item.quantity||1),r(4),h(" ",t.isArabic?"\u0645\u0644\u0627\u062D\u0638\u0627\u062A":"Notes"," "),r(3),h(" ",t.isArabic?"\u062D\u0630\u0641":"Remove"," "),r(),f(t.expandedNotes.has(e.key)?25:-1)}}function _e(a,i){if(a&1&&(c(0,"section",5)(1,"div",13),d(2),s(),N(3,pe,26,12,"article",14,L().trackByKey,!0),s()),a&2){let e=l();r(2),y(e.isArabic?"\u0641\u064A \u0627\u0644\u0633\u0644\u0629":"In Cart"),r(),V(e.unordered)}}function ge(a,i){if(a&1&&(c(0,"span",34),d(1),s()),a&2){let e=l();r(),h(" +\u20AA",e.add)}}function Ce(a,i){if(a&1&&(c(0,"span",41),d(1),b(2,ge,2,1,"span",34),s()),a&2){let e=i;r(),y(e.label),r(),f(e.add?2:-1)}}function he(a,i){if(a&1&&(c(0,"div",21),b(1,Ce,3,2,"span",41),s()),a&2){let e,t=l().$implicit,n=l(2);r(),f((e=n.displaySelectedChoice(t))?1:-1,e)}}function xe(a,i){if(a&1&&(c(0,"div",40),d(1),s()),a&2){let e=l().$implicit;r(),y(e.item.details)}}function be(a,i){if(a&1){let e=A();c(0,"article",36)(1,"img",15),g("click",function(){let n=p(e).$implicit,o=l(2);return _(o.openOrderModal(n))}),s(),c(2,"div",16)(3,"div",17)(4,"div",18),d(5),s(),c(6,"div",20),d(7),T(8,"number"),s()(),b(9,he,2,1,"div",21),c(10,"div",22)(11,"div",37)(12,"span",38),d(13),s()(),c(14,"div",39),d(15),s()(),b(16,xe,2,1,"div",40),s()()}if(a&2){let e=i.$implicit,t=l(2);r(),v("src",t.getItemImage(e.item.name)||"",F),r(4),y(t.displayName(e.item.name)),r(2),h("",$(8,8,t.getUnitPrice(e),"1.0-2"),"\u20AA"),r(2),f(t.hasChoicesForOrder(e)?9:-1),r(3),v("ngClass",Y(11,ce,(e.item.state||"unordered")==="unordered",(e.item.state||"unordered")==="ordered",(e.item.state||"unordered")==="done")),r(),h(" ",(e.item.state||"ordered")==="done"?t.isArabic?"\u062A\u0645 \u0627\u0644\u062A\u0642\u062F\u064A\u0645":"Served":t.isArabic?"\u062A\u0645 \u0627\u0644\u0637\u0644\u0628":"Ordered"," "),r(2),h("\xD7 ",e.item.quantity||1),r(),f(e.item.details?16:-1)}}function fe(a,i){if(a&1&&(c(0,"section",5)(1,"div",13),d(2),s(),N(3,be,17,15,"article",36,L().trackByKey,!0),s()),a&2){let e=l();r(2),y(e.isArabic?"\u062A\u0645 \u0627\u0644\u0637\u0644\u0628":"Submitted"),r(),V(e.submitted)}}function ye(a,i){if(a&1&&(c(0,"div",6),d(1),s()),a&2){let e=l();r(),h(" ",e.isArabic?"\u0633\u0644\u062A\u0643 \u0641\u0627\u0631\u063A\u0629.":"Your cart is empty."," ")}}function ve(a,i){if(a&1&&(c(0,"span",34),d(1),s()),a&2){let e=l().$implicit;r(),h(" +\u20AA",e.add)}}function we(a,i){if(a&1){let e=A();c(0,"span",33),g("click",function(){let n=p(e).$index,o=l(4);return _(o.selectChoiceInModal(n))}),d(1),b(2,ve,2,1,"span",34),s()}if(a&2){let e=i.$implicit,t=i.$index,n=l(4);B("active",n.modalChoiceIndex===t),r(),y(e.label),r(),f(e.add?2:-1)}}function Ie(a,i){if(a&1&&(c(0,"div",51)(1,"h6",61),d(2),s(),c(3,"div",21),N(4,we,3,4,"span",32,R),s()()),a&2){let e=l(),t=l(2);r(2),y(t.isArabic?"\u0627\u062E\u062A\u0631 \u062E\u064A\u0627\u0631\u0627\u064B:":"Select a choice:"),r(2),V(t.getChoiceDisplayStructured(e.item.name))}}function Me(a,i){if(a&1){let e=A();c(0,"div",44),g("click",function(n){return p(e),_(n.stopPropagation())}),c(1,"button",45),g("click",function(){p(e);let n=l(2);return _(n.closeOrderModal())}),s(),c(2,"div",46),W(3,"img",47),s(),c(4,"div",48)(5,"div",49)(6,"h3",50),d(7),s(),c(8,"div",20),d(9),T(10,"number"),s()(),b(11,Ie,6,1,"div",51),c(12,"div",52)(13,"div",24)(14,"button",53),g("click",function(){p(e);let n=l(2);return _(n.modalQty=n.Math.max(1,n.modalQty-1))}),d(15,"\u2212"),s(),c(16,"input",54),g("change",function(n){p(e);let o=l(2);return _(o.modalQty=o.Math.max(1,+n.target.value))}),s(),c(17,"button",55),g("click",function(){p(e);let n=l(2);return _(n.modalQty=n.modalQty+1)}),d(18,"+"),s()(),c(19,"div",56)(20,"small"),d(21),s(),c(22,"div",57),d(23),T(24,"number"),s()()(),c(25,"div",51)(26,"div",58)(27,"textarea",59),z("ngModelChange",function(n){p(e);let o=l(2);return q(o.modalNotes,n)||(o.modalNotes=n),_(n)}),s()()(),c(28,"button",60),g("click",function(){p(e);let n=l(2);return _(n.saveOrderModal())}),d(29),s()()()}if(a&2){let e=i,t=l(2);r(3),v("src",t.getItemImage(e.item.name)||"",F),r(4),y(t.displayName(e.item.name)),r(2),h("",$(10,15,t.modalUnitPrice,"1.0-2"),"\u20AA"),r(2),f(t.getChoiceDisplayStructured(e.item.name).length?11:-1),r(3),v("disabled",t.modalLocked),r(2),v("value",t.modalQty)("disabled",t.modalLocked),r(),v("disabled",t.modalLocked),r(4),y(t.isArabic?"\u0627\u0644\u0645\u062C\u0645\u0648\u0639":"Total"),r(2),h("",$(24,18,(t.modalUnitPrice||0)*(t.modalQty||1),"1.0-2"),"\u20AA"),r(4),j("ngModel",t.modalNotes),v("placeholder",t.isArabic?"\u0627\u0643\u062A\u0628 \u0645\u0644\u0627\u062D\u0638\u0627\u062A\u0643 \u0647\u0646\u0627...":"Write your notes here...")("disabled",t.modalLocked),r(),v("disabled",t.modalLocked||t.getChoiceDisplayList(e.item.name).length&&t.modalChoiceIndex===null),r(),h(" ",t.isArabic?"\u062D\u0641\u0638":"Save"," ")}}function ke(a,i){if(a&1){let e=A();c(0,"div",42),g("click",function(){p(e);let n=l();return _(n.closeOrderModal())}),b(1,Me,30,21,"div",43),s()}if(a&2){let e,t=l();D("dir",t.isArabic?"rtl":"ltr"),r(),f((e=t.modalRow)?1:-1,e)}}var se=class a{constructor(i,e,t,n,o){this.lang=i;this.tableSession=e;this.location=t;this.menu=n;this.platformId=o}isArabic=!1;Math=Math;session=null;unsub=null;categoriesSub=null;categoriesCache=null;rows=[];unordered=[];submitted=[];expandedNotes=new Set;notesDrafts={};showOrderModal=!1;modalRow=null;modalLocked=!1;modalQty=1;modalNotes="";modalChoiceIndex=null;ngOnInit(){w(this.platformId)&&(this.lang.isArabic$.subscribe(i=>this.isArabic=i),this.tableSession.session$.subscribe(i=>{this.session=i,this.detach(),i?(this.attach(i),this.attachCategories(i.restId)):this.detachCategories()}))}getMenuItemPrice(i){let e=this.findMenuItemByName(i),t=Number(e?.price??0);return isNaN(t)?0:t}getChoiceAddByIndex(i,e){if(e==null)return 0;let n=this.getChoiceDisplayStructured(i)[e];return n&&Number(n.add)||0}getUnitPrice(i){let e=i.item.state??"unordered",t=Number(i.item.unitPrice??NaN);if(e!=="unordered"&&!isNaN(t))return t;let n=this.getMenuItemPrice(i.item.name||""),o=this.getSelectedChoiceIndex(i),m=this.getChoiceAddByIndex(i.item.name||"",o>=0?o:null);return n+m}getItemImage(i){return this.findMenuItemByName(i)?.image||null}ngOnDestroy(){this.detach(),this.detachCategories()}attach(i){if(!w(this.platformId))return;let e=k(O,`restaurants/${i.restId}/tables/${i.tableId}/order`);this.unsub=ee(e,t=>{let n=t.val()||{},o=Object.keys(n).map(u=>({key:u,item:n[u]||{}}));o.sort((u,C)=>(u.item.ts||0)-(C.item.ts||0)||(u.item.name||"").localeCompare(C.item.name||"")),this.rows=o,this.unordered=o.filter(u=>(u.item.state??"unordered")==="unordered"),this.submitted=o.filter(u=>(u.item.state??"unordered")!=="unordered");let m={};for(let u of o){let C=u.key;m[C]=this.expandedNotes.has(C)?this.notesDrafts[C]??(u.item.details||""):u.item.details||""}this.notesDrafts=m})}detach(){this.unsub&&(this.unsub(),this.unsub=null),this.rows=[],this.unordered=[],this.submitted=[],this.expandedNotes.clear()}attachCategories(i){w(this.platformId)&&(this.detachCategories(),this.categoriesSub=this.menu.getCategories(i).subscribe(e=>{this.categoriesCache=e}))}detachCategories(){this.categoriesSub&&(this.categoriesSub.unsubscribe(),this.categoriesSub=null),this.categoriesCache=null}goBack(){this.location.back()}get subtotal(){return this.rows.reduce((i,e)=>i+this.getUnitPrice(e)*Number(e.item.quantity||0),0)}findMenuItemByName(i){let e=this.categoriesCache;if(!e||!i)return null;let t=i.toLocaleLowerCase(),n=null;return Object.keys(e).some(o=>{let m=e[o]?.items||{};return Object.keys(m).some(u=>{let C=m[u]||{},I=(C.name||"").toString(),x=(C.nameArabic||"").toString();return I.toLocaleLowerCase()===t||x.toLocaleLowerCase()===t?(n=C,!0):!1})}),n}getChoiceDisplayList(i){let e=this.findMenuItemByName(i),t=this.isArabic?e?.choicesArabic:e?.choices,n=Array.isArray(t)?t.filter(o=>!!o):[];if(!n.length){let o=this.isArabic?e?.choices:e?.choicesArabic;n=Array.isArray(o)?o.filter(m=>!!m):[]}return n}getChoiceDisplayStructured(i){let e=this.findMenuItemByName(i),t=Array.isArray(e?.choiceOptions)?e.choiceOptions:null;return t&&t.length?t.map(n=>({label:this.isArabic?String(n.ar||n.en||""):String(n.en||n.ar||""),add:Number(n.add)||0})):this.getChoiceDisplayList(i).map(n=>({label:n,add:0}))}getChoicePairs(i){let e=this.findMenuItemByName(i),t=Array.isArray(e?.choices)?e.choices:[],n=Array.isArray(e?.choicesArabic)?e.choicesArabic:[];return{en:t,ar:n}}getSelectedChoiceIndex(i){let e=i.item.name||"",{en:t,ar:n}=this.getChoicePairs(e),o=i.item.choiceEn||null,m=i.item.choiceAr||null,u=o?t.findIndex(x=>x===o):-1;if(u>=0)return u;let C=m?n.findIndex(x=>x===m):-1;if(C>=0)return C;let I=this.getChoiceDisplayStructured(e);if(o){let x=I.findIndex(M=>(this.isArabic?!1:M.label===o)||!this.isArabic&&M.label===o);if(x>=0)return x}if(m){let x=I.findIndex(M=>(this.isArabic?M.label===m:!1)||this.isArabic&&M.label===m);if(x>=0)return x}return-1}hasChoicesForOrder(i){let e=i.item.name||"",{en:t,ar:n}=this.getChoicePairs(e);if(t.length+n.length>0)return!0;let o=this.findMenuItemByName(e);return(Array.isArray(o?.choiceOptions)?o.choiceOptions:[]).length>0}displayChoiceLabel(i){return(this.isArabic?i.item.choiceAr||i.item.choiceEn:i.item.choiceEn||i.item.choiceAr)||null}displaySelectedChoice(i){let e=this.getSelectedChoiceIndex(i);if(e<0)return null;let t=this.getChoiceDisplayStructured(i.item.name||"");return e>=t.length?{label:t[e]?.label??"",add:0}:{label:t[e].label,add:t[e].add}}selectChoiceForOrder(i,e){if(!w(this.platformId)||!this.session)return;let t=i.item.name||"",{en:n,ar:o}=this.getChoicePairs(t),m=n[e]??null,u=o[e]??null,C=this.getMenuItemPrice(t),I=this.getChoiceAddByIndex(t,e),x=C+I,M=`restaurants/${this.session.restId}/tables/${this.session.tableId}/order/${i.key}`;S(k(O,M),{choiceEn:m,choiceAr:u,unitPrice:x})}openOrderModal(i){this.modalRow=i,this.modalLocked=(i.item.state??"unordered")!=="unordered",this.modalQty=Number(i.item.quantity||1),this.modalNotes=i.item.details||"";let e=this.getSelectedChoiceIndex(i);this.modalChoiceIndex=e>=0?e:null,this.showOrderModal=!0}closeOrderModal(){this.showOrderModal=!1,this.modalRow=null,this.modalChoiceIndex=null}get modalChoices(){return this.getChoiceDisplayList(this.modalRow?.item.name||"")}get modalUnitPrice(){if(!this.modalRow)return 0;let i=this.modalRow.item.name||"",e=this.getMenuItemPrice(i),t=this.modalChoiceIndex!==null?this.modalChoiceIndex:this.getSelectedChoiceIndex(this.modalRow),n=this.getChoiceAddByIndex(i,t);return e+n}selectChoiceInModal(i){this.modalLocked||(this.modalChoiceIndex=i)}saveOrderModal(){return P(this,null,function*(){if(!w(this.platformId)||!this.session||!this.modalRow||this.modalLocked)return;let i=`restaurants/${this.session.restId}/tables/${this.session.tableId}/order/${this.modalRow.key}`,e={quantity:Math.max(1,Number(this.modalQty)||1),details:this.modalNotes||""};if(this.modalChoiceIndex!==null){let t=this.modalRow.item.name||"",{en:n,ar:o}=this.getChoicePairs(t);e.choiceEn=n[this.modalChoiceIndex]??null,e.choiceAr=o[this.modalChoiceIndex]??null;let m=this.getMenuItemPrice(t),u=this.getChoiceAddByIndex(t,this.modalChoiceIndex);e.unitPrice=m+u}yield S(k(O,i),e),this.closeOrderModal()})}toggleNotes(i){if(this.expandedNotes.has(i))this.expandedNotes.delete(i);else{this.expandedNotes.add(i);let e=this.rows.find(t=>t.key===i);e&&this.notesDrafts[i]===void 0&&(this.notesDrafts[i]=e.item.details||"")}}setQty(i,e){return P(this,null,function*(){if(!w(this.platformId)||!this.session)return;let t=this.rows.find(o=>o.key===i);if(t&&(t.item.state??"unordered")!=="unordered")return;e<1&&(e=1);let n=`restaurants/${this.session.restId}/tables/${this.session.tableId}/order/${i}`;yield S(k(O,n),{quantity:e})})}inc(i,e,t){t||this.setQty(i,(e||0)+1)}dec(i,e,t){t||this.setQty(i,Math.max(1,(e||1)-1))}onNotesInput(i,e,t){return P(this,null,function*(){if(!w(this.platformId)||t||!this.session)return;let n=`restaurants/${this.session.restId}/tables/${this.session.tableId}/order/${i}`;yield S(k(O,n),{details:e||""})})}saveNotes(i,e,t){return P(this,null,function*(){if(!w(this.platformId)||t||!this.session)return;let n=`restaurants/${this.session.restId}/tables/${this.session.tableId}/order/${i}`;yield S(k(O,n),{details:e||""})})}trackByKey(i,e){return e.key}remove(i,e){return P(this,null,function*(){if(!w(this.platformId)||e||!this.session)return;let t=`restaurants/${this.session.restId}/tables/${this.session.tableId}/order/${i}`;yield Z(k(O,t))})}confirmOrder(){return P(this,null,function*(){if(!w(this.platformId)||!this.session||this.unordered.length===0)return;let i=`restaurants/${this.session.restId}/tables/${this.session.tableId}/order`;for(let e of this.unordered)yield S(k(O,`${i}/${e.key}`),{state:"ordered"})})}resolveNameFromMenu(i,e){let t=this.categoriesCache;if(!t||!i)return null;let n=i.toLocaleLowerCase(),o=null;return Object.keys(t).some(m=>{let u=t[m]?.items||{};return Object.keys(u).some(C=>{let I=u[C]||{},x=(I.name||"").toString(),M=(I.nameArabic||"").toString();return x.toLocaleLowerCase()===n||M.toLocaleLowerCase()===n?(o=I,!0):!1})}),o?e?o.nameArabic||o.name||null:o.name||o.nameArabic||null:null}displayName(i){return this.resolveNameFromMenu(i||"",this.isArabic)||i}static \u0275fac=function(e){return new(e||a)(E(X),E(te),E(K),E(ae),E(Q))};static \u0275cmp=U({type:a,selectors:[["app-cart"]],decls:20,vars:13,consts:[[1,"cart-fullpage"],[1,"cart-header"],["aria-label","close",1,"btn-icon",3,"click"],[1,"title"],[1,"cart-body"],[1,"cart-section"],[1,"empty"],[1,"cart-footer"],[1,"summary"],[1,"label"],[1,"value"],[1,"btn-confirm",3,"click","disabled"],[1,"order-modal-overlay"],[1,"section-title"],[1,"item-card"],["alt","item",1,"thumb",3,"click","src"],[1,"meta"],[1,"row1"],[1,"name"],[1,"badge","badge-unordered","status-chip"],[1,"price-chip"],[1,"choice-group"],[1,"row2"],[1,"row2-left"],[1,"qty-ctrl"],[1,"round","minus",3,"click"],["type","number","min","1",1,"qty-input",3,"change","value"],[1,"round","plus",3,"click"],[1,"btn","btn-sm","btn-outline-secondary",2,"margin","5px",3,"click"],[1,"row2-right"],[1,"btn-remove",3,"click"],[1,"notes-panel"],[1,"choice-chip",3,"active"],[1,"choice-chip",3,"click"],[1,"choice-add"],[1,"notes-input",3,"ngModelChange","blur","placeholder","ngModel"],[1,"item-card","submitted"],[1,"state"],[1,"badge",3,"ngClass"],[1,"qty","readonly"],[1,"notes-view"],[1,"choice-chip","readonly","active"],[1,"order-modal-overlay",3,"click"],[1,"order-modal"],[1,"order-modal",3,"click"],["type","button",1,"btn-close",3,"click"],[1,"modal-image"],["alt","preview",3,"src"],[1,"modal-body"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"mb-0"],[1,"mb-3"],[1,"d-flex","align-items-center","justify-content-between","mb-4"],["type","button",1,"round","minus",3,"click","disabled"],["type","number","min","1",1,"qty-input",3,"change","value","disabled"],["type","button",1,"round","plus",3,"click","disabled"],[1,"total-price"],[1,"h5","mb-0"],[1,"mt-2"],["rows","3",1,"form-control",3,"ngModelChange","ngModel","placeholder","disabled"],["type","button",1,"btn","btn-order","w-100",3,"click","disabled"],[1,"mb-2"]],template:function(e,t){e&1&&(c(0,"div",0)(1,"header",1)(2,"button",2),g("click",function(){return t.goBack()}),d(3,"\u2715"),s(),c(4,"h3",3),d(5),s()(),c(6,"main",4),b(7,_e,5,1,"section",5),b(8,fe,5,1,"section",5),b(9,ye,2,1,"div",6),s(),c(10,"footer",7)(11,"div",8)(12,"div",9),d(13),s(),c(14,"div",10),d(15),T(16,"number"),s()(),c(17,"button",11),g("click",function(){return t.confirmOrder()}),d(18),s()(),b(19,ke,2,2,"div",12),s()),e&2&&(D("dir",t.isArabic?"rtl":"ltr"),r(5),y(t.isArabic?"\u0633\u0644\u0629 \u0627\u0644\u0645\u0634\u062A\u0631\u064A\u0627\u062A":"Your Cart"),r(2),f(t.unordered.length?7:-1),r(),f(t.submitted.length?8:-1),r(),f(t.rows.length===0?9:-1),r(4),y(t.isArabic?"\u0627\u0644\u0645\u062C\u0645\u0648\u0639":"Total"),r(2),h("",$(16,10,t.subtotal,"1.0-2"),"\u20AA"),r(2),v("disabled",!t.unordered.length),r(),h(" ",t.unordered.length?t.isArabic?"\u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0637\u0644\u0628":"Confirm Order":t.isArabic?"\u062A\u0645 \u062A\u0623\u0643\u064A\u062F \u0627\u0644\u0637\u0644\u0628":"Order Confirmed"," "),r(),f(t.showOrderModal?19:-1))},dependencies:[J,G,re,ie,ne,oe,H],styles:['[_ngcontent-%COMP%]:root{--primary: var(--primary-color, #ff6b6b);--primary-rgb: var(--primary-color-rgb, 255,107,107);--secondary: var(--secondary-color, #4ecdc4);--bg: var(--app-bg, #f7f8fa);--card: var(--card-bg, #ffffff);--text: var(--text-color, #1f2d3d);--muted: var(--muted-color, #6b7280);--danger: #e53935;--success: #2ecc71;--info: #2c7be5}.cart-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;z-index:2000;animation:_ngcontent-%COMP%_fadeIn .2s ease}.cart-fullpage[_ngcontent-%COMP%]{position:relative;min-height:100vh;background:var(--bg);display:grid;grid-template-rows:auto 1fr auto;animation:_ngcontent-%COMP%_slideUp .28s ease}.cart-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:14px 16px;background:#fff;box-shadow:0 2px 10px #0000000f;position:relative}.cart-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0;font-weight:800;font-size:20px;color:var(--text);text-align:center;font-family:Tajawal,Poppins,sans-serif}.btn-icon[_ngcontent-%COMP%]{border:none;background:#f1f2f5;width:36px;height:36px;border-radius:10px;font-weight:700;color:var(--text)}.cart-body[_ngcontent-%COMP%]{overflow-y:auto;padding:12px 12px 96px}.cart-section[_ngcontent-%COMP%]{margin-bottom:14px}.section-title[_ngcontent-%COMP%]{font-weight:800;color:var(--text);margin:6px 0 10px}.item-card[_ngcontent-%COMP%]{display:grid;grid-template-columns:140px 1fr;align-items:stretch;background:#fff;border-radius:20px;overflow:hidden;box-shadow:0 6px 18px #0000000f}.item-card[_ngcontent-%COMP%] + .item-card[_ngcontent-%COMP%]{margin-top:12px}.item-card.submitted[_ngcontent-%COMP%]{opacity:.98}.thumb[_ngcontent-%COMP%]{width:calc(100% - 16px);height:calc(100% - 16px);object-fit:cover;border-radius:14px;margin:8px}.meta[_ngcontent-%COMP%]{display:grid;gap:8px;padding:12px 25px}.row1[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.name[_ngcontent-%COMP%]{font-weight:800;color:var(--text)}.price[_ngcontent-%COMP%]{display:none}.price-chip[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb, 255, 107, 107),.12);color:var(--primary-color, #ff6b6b);padding:6px 12px;border-radius:999px;font-weight:700}.row2[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}.qty-ctrl[_ngcontent-%COMP%]{background:rgba(var(--primary-color-rgb, 255, 107, 107),.08);border-radius:14px;padding:6px 8px;display:inline-flex;align-items:center;gap:10px;box-shadow:inset 0 0 0 1px #00000008}.round[_ngcontent-%COMP%]{width:38px;height:38px;border-radius:12px;border:none;display:grid;place-items:center;font-size:18px;font-weight:800;color:#fff;transition:transform .1s ease;background:var(--primary-color)}.round[_ngcontent-%COMP%]:active{transform:scale(.98)}.round.minus[_ngcontent-%COMP%], .round.plus[_ngcontent-%COMP%]{background:var(--primary-color)}.qty[_ngcontent-%COMP%]{min-width:26px;text-align:center;font-weight:900;font-size:16px}.qty-input[_ngcontent-%COMP%]{width:56px;height:36px;border:none;background:transparent;text-align:center;font-weight:900;font-size:16px;color:var(--text)}.qty-input[_ngcontent-%COMP%]:focus{outline:none}.btn-text[_ngcontent-%COMP%]{border:none;background:transparent;color:var(--info);font-weight:700}.btn-notes[_ngcontent-%COMP%]{border:1px solid #d1d5db;background:#fff;color:var(--text);font-weight:600;padding:6px 10px;border-radius:10px}.btn-notes[_ngcontent-%COMP%]:hover{background:#f8fafc}.btn-remove[_ngcontent-%COMP%]{background:#ff3b30;color:#fff;border:none;font-weight:800;padding:10px 14px;border-radius:12px;box-shadow:0 6px 16px #ff3b3040}.notes-panel[_ngcontent-%COMP%]{margin-top:6px;animation:_ngcontent-%COMP%_notesIn .18s ease}.notes-input[_ngcontent-%COMP%]{width:100%;min-height:64px;border:1px solid #e5e7eb;border-radius:12px;padding:8px 10px;font-family:inherit}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:999px;font-weight:800;font-size:12px}.badge-unordered[_ngcontent-%COMP%]{background:#fff6e5;color:#b45309;border:1px solid #fbbf24}.badge-ordered[_ngcontent-%COMP%]{background:#e6f0ff;color:#1d4ed8;border:1px solid #60a5fa}.badge-done[_ngcontent-%COMP%]{background:#e8fff1;color:#047857;border:1px solid #34d399}.status-chip[_ngcontent-%COMP%]{margin-inline-start:8px}.notes-view[_ngcontent-%COMP%]{color:var(--muted);font-size:14px}.choice-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}.choice-chip[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;border-radius:99px;border:1px solid #d1d5db;background:#f5f6f8;color:var(--text);font-weight:700;cursor:pointer;-webkit-user-select:none;user-select:none}.choice-chip.active[_ngcontent-%COMP%]{background:rgba(var(--primary-color),.12);color:var(--primary-color);border-color:var(--primary)}.choice-chip.readonly[_ngcontent-%COMP%]{pointer-events:none;opacity:.9}.choice-add[_ngcontent-%COMP%]{color:var(--primary-color, #ff6b6b);font-weight:700;margin-inline-start:6px}.empty[_ngcontent-%COMP%]{text-align:center;color:var(--muted);padding:32px 0}.cart-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff;box-shadow:0 -4px 16px #00000014;padding:12px 16px;display:grid;grid-template-rows:auto auto;justify-items:center;gap:8px}.summary[_ngcontent-%COMP%]{display:grid;gap:2px;text-align:center}.summary[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--muted);font-weight:700;font-size:12px}.summary[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text);font-weight:900;font-size:20px}.btn-confirm[_ngcontent-%COMP%]{background:var(--primary-color);color:#fff;border:none;border-radius:16px;padding:14px 18px;font-weight:900;box-shadow:0 12px 22px rgba(var(--primary-rgb),.35);width:min(480px,92%)}.btn-confirm[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;filter:grayscale(10%);box-shadow:none;pointer-events:none}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(8px);opacity:.98}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_notesIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}@media(max-width:575.98px){.item-card[_ngcontent-%COMP%]{grid-template-columns:1fr}.thumb[_ngcontent-%COMP%]{width:calc(100% - 16px);height:180px}.meta[_ngcontent-%COMP%]{padding-top:4px}}@media(min-width:576px){.item-card[_ngcontent-%COMP%]{grid-template-columns:100px 1fr}.thumb[_ngcontent-%COMP%]{width:100px;height:100px}}.order-modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;z-index:3000;display:grid;place-items:center;animation:_ngcontent-%COMP%_fadeIn .2s ease}.order-modal[_ngcontent-%COMP%]{background:#fff;width:min(92vw,680px);max-height:85vh;border-radius:20px;overflow:hidden;box-shadow:0 20px 50px #00000040;display:grid;grid-template-rows:auto 1fr}.btn-close[_ngcontent-%COMP%]{position:absolute;top:12px;inset-inline-end:12px;background:#0009;border:none;width:32px;height:32px;border-radius:50%;color:#fff;display:grid;place-items:center}.btn-close[_ngcontent-%COMP%]:before{content:"\\2715";font-size:16px;line-height:1}.modal-image[_ngcontent-%COMP%]{background:#fff}.modal-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:260px;object-fit:cover;display:block}.modal-body[_ngcontent-%COMP%]{padding:18px;overflow:auto}']})};export{se as CartComponent};
