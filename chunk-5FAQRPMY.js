import{$ as rt,I as qt,Q as H,R as U,S as Vt,T as $t,U as zt,W as B,X as M,ba as P,v as Dt,w as Ut,x as Bt,y as xt,z as j}from"./chunk-I45V2STG.js";import{a as S,b as D,e as p}from"./chunk-46AQF2XH.js";var ot,jt,W=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Yt=function(t){if(document.readyState==="loading")return"loading";var e=W();if(e){if(t<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||t<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||t<e.domComplete)return"dom-content-loaded"}return"complete"},cn=function(t){var e=t.nodeName;return t.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},ut=function(t,e){var n="";try{for(;t&&t.nodeType!==9;){var r=t,i=r.id?"#"+r.id:cn(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(e||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;t=r.parentNode}}catch{}return n},Qt=-1,un=function(){return Qt},q=function(t){addEventListener("pageshow",function(e){e.persisted&&(Qt=e.timeStamp,t(e))},!0)},lt=function(){var t=W();return t&&t.activationStart||0},y=function(t,e){var n=W(),r="navigate";return un()>=0?r="back-forward-cache":n&&(document.prerendering||lt()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},F=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){e(i.getEntries())})});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},A=function(t,e,n,r){var i,o;return function(s){e.value>=0&&(s||r)&&((o=e.value-(i||0))||i===void 0)&&(i=e.value,e.delta=o,e.rating=(function(a,c){return a>c[1]?"poor":a>c[0]?"needs-improvement":"good"})(e.value,n),t(e))}},ft=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},X=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},dt=function(t){var e=!1;return function(){e||(t(),e=!0)}},k=-1,Ht=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},G=function(t){document.visibilityState==="hidden"&&k>-1&&(k=t.type==="visibilitychange"?t.timeStamp:0,ln())},Kt=function(){addEventListener("visibilitychange",G,!0),addEventListener("prerenderingchange",G,!0)},ln=function(){removeEventListener("visibilitychange",G,!0),removeEventListener("prerenderingchange",G,!0)},Zt=function(){return k<0&&(k=Ht(),Kt(),q(function(){setTimeout(function(){k=Ht(),Kt()},0)})),{get firstHiddenTime(){return k}}},pt=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},Gt=[1800,3e3],fn=function(t,e){e=e||{},pt(function(){var n,r=Zt(),i=y("FCP"),o=F("paint",function(s){s.forEach(function(a){a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-lt(),0),i.entries.push(a),n(!0)))})});o&&(n=A(t,i,Gt,e.reportAllChanges),q(function(s){i=y("FCP"),n=A(t,i,Gt,e.reportAllChanges),ft(function(){i.value=performance.now()-s.timeStamp,n(!0)})}))})},Wt=[.1,.25],te=function(t,e){(function(n,r){r=r||{},fn(dt(function(){var i,o=y("CLS",0),s=0,a=[],c=function(l){l.forEach(function(u){if(!u.hadRecentInput){var h=a[0],I=a[a.length-1];s&&u.startTime-I.startTime<1e3&&u.startTime-h.startTime<5e3?(s+=u.value,a.push(u)):(s=u.value,a=[u])}}),s>o.value&&(o.value=s,o.entries=a,i())},f=F("layout-shift",c);f&&(i=A(n,o,Wt,r.reportAllChanges),X(function(){c(f.takeRecords()),i(!0)}),q(function(){s=0,o=y("CLS",0),i=A(n,o,Wt,r.reportAllChanges),ft(function(){return i()})}),setTimeout(i,0))}))})(function(n){var r=(function(i){var o,s={};if(i.entries.length){var a=i.entries.reduce(function(f,l){return f&&f.value>l.value?f:l});if(a&&a.sources&&a.sources.length){var c=(o=a.sources).find(function(f){return f.node&&f.node.nodeType===1})||o[0];c&&(s={largestShiftTarget:ut(c.node),largestShiftTime:a.startTime,largestShiftValue:a.value,largestShiftSource:c,largestShiftEntry:a,loadState:Yt(a.startTime)})}}return Object.assign(i,{attribution:s})})(n);t(r)},e)};var ee=0,it=1/0,K=0,dn=function(t){t.forEach(function(e){e.interactionId&&(it=Math.min(it,e.interactionId),K=Math.max(K,e.interactionId),ee=K?(K-it)/7+1:0)})},ne=function(){return ot?ee:performance.interactionCount||0},pn=function(){"interactionCount"in performance||ot||(ot=F("event",dn,{type:"event",buffered:!0,durationThreshold:0}))},E=[],x=new Map,re=0,gn=function(){var t=Math.min(E.length-1,Math.floor((ne()-re)/50));return E[t]},ie=[],mn=function(t){if(ie.forEach(function(i){return i(t)}),t.interactionId||t.entryType==="first-input"){var e=E[E.length-1],n=x.get(t.interactionId);if(n||E.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};x.set(r.id,r),E.push(r)}E.sort(function(i,o){return o.latency-i.latency}),E.length>10&&E.splice(10).forEach(function(i){return x.delete(i.id)})}}},gt=function(t){var e=self.requestIdleCallback||self.setTimeout,n=-1;return t=dt(t),document.visibilityState==="hidden"?t():(n=e(t),X(t)),n},Xt=[200,500],hn=function(t,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},pt(function(){var n;pn();var r,i=y("INP"),o=function(a){gt(function(){a.forEach(mn);var c=gn();c&&c.latency!==i.value&&(i.value=c.latency,i.entries=c.entries,r())})},s=F("event",o,{durationThreshold:(n=e.durationThreshold)!==null&&n!==void 0?n:40});r=A(t,i,Xt,e.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),X(function(){o(s.takeRecords()),r(!0)}),q(function(){re=ne(),E.length=0,x.clear(),i=y("INP"),r=A(t,i,Xt,e.reportAllChanges)}))}))},L=[],b=[],st=0,mt=new WeakMap,O=new Map,ct=-1,Tn=function(t){L=L.concat(t),ae()},ae=function(){ct<0&&(ct=gt(vn))},vn=function(){O.size>10&&O.forEach(function(s,a){x.has(a)||O.delete(a)});var t=E.map(function(s){return mt.get(s.entries[0])}),e=b.length-50;b=b.filter(function(s,a){return a>=e||t.includes(s)});for(var n=new Set,r=0;r<b.length;r++){var i=b[r];oe(i.startTime,i.processingEnd).forEach(function(s){n.add(s)})}var o=L.length-1-50;L=L.filter(function(s,a){return s.startTime>st&&a>o||n.has(s)}),ct=-1};ie.push(function(t){t.interactionId&&t.target&&!O.has(t.interactionId)&&O.set(t.interactionId,t.target)},function(t){var e,n=t.startTime+t.duration;st=Math.max(st,t.processingEnd);for(var r=b.length-1;r>=0;r--){var i=b[r];if(Math.abs(n-i.renderTime)<=8){(e=i).startTime=Math.min(t.startTime,e.startTime),e.processingStart=Math.min(t.processingStart,e.processingStart),e.processingEnd=Math.max(t.processingEnd,e.processingEnd),e.entries.push(t);break}}e||(e={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:n,entries:[t]},b.push(e)),(t.interactionId||t.entryType==="first-input")&&mt.set(t,e),ae()});var oe=function(t,e){for(var n,r=[],i=0;n=L[i];i++)if(!(n.startTime+n.duration<t)){if(n.startTime>e)break;r.push(n)}return r},se=function(t,e){jt||(jt=F("long-animation-frame",Tn)),hn(function(n){var r=(function(i){var o=i.entries[0],s=mt.get(o),a=o.processingStart,c=s.processingEnd,f=s.entries.sort(function(C,sn){return C.processingStart-sn.processingStart}),l=oe(o.startTime,c),u=i.entries.find(function(C){return C.target}),h=u&&u.target||O.get(o.interactionId),I=[o.startTime+o.duration,c].concat(l.map(function(C){return C.startTime+C.duration})),z=Math.max.apply(Math,I),on={interactionTarget:ut(h),interactionTargetElement:h,interactionType:o.name.startsWith("key")?"keyboard":"pointer",interactionTime:o.startTime,nextPaintTime:z,processedEventEntries:f,longAnimationFrameEntries:l,inputDelay:a-o.startTime,processingDuration:c-a,presentationDelay:Math.max(z-c,0),loadState:Yt(o.startTime)};return Object.assign(i,{attribution:on})})(n);t(r)},e)},Jt=[2500,4e3],at={},ce=function(t,e){(function(n,r){r=r||{},pt(function(){var i,o=Zt(),s=y("LCP"),a=function(l){r.reportAllChanges||(l=l.slice(-1)),l.forEach(function(u){u.startTime<o.firstHiddenTime&&(s.value=Math.max(u.startTime-lt(),0),s.entries=[u],i())})},c=F("largest-contentful-paint",a);if(c){i=A(n,s,Jt,r.reportAllChanges);var f=dt(function(){at[s.id]||(a(c.takeRecords()),c.disconnect(),at[s.id]=!0,i(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return gt(f)},{once:!0,capture:!0})}),X(f),q(function(l){s=y("LCP"),i=A(n,s,Jt,r.reportAllChanges),ft(function(){s.value=performance.now()-l.timeStamp,at[s.id]=!0,i(!0)})})}})})(function(n){var r=(function(i){var o={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:i.value};if(i.entries.length){var s=W();if(s){var a=s.activationStart||0,c=i.entries[i.entries.length-1],f=c.url&&performance.getEntriesByType("resource").filter(function(z){return z.name===c.url})[0],l=Math.max(0,s.responseStart-a),u=Math.max(l,f?(f.requestStart||f.startTime)-a:0),h=Math.max(u,f?f.responseEnd-a:0),I=Math.max(h,c.startTime-a);o={element:ut(c.element),timeToFirstByte:l,resourceLoadDelay:u-l,resourceLoadDuration:h-u,elementRenderDelay:I-h,navigationEntry:s,lcpEntry:c},c.url&&(o.url=c.url),f&&(o.lcpResourceEntry=f)}}return Object.assign(i,{attribution:o})})(n);t(r)},e)};var fe="@firebase/installations",Et="0.6.19";var de=1e4,pe=`w:${Et}`,ge="FIS_v2",En="https://firebaseinstallations.googleapis.com/v1",In=3600*1e3,_n="installations",Sn="Installations";var bn={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},N=new j(_n,Sn,bn);function me(t){return t instanceof xt&&t.code.includes("request-failed")}function he({projectId:t}){return`${En}/projects/${t}/installations`}function Te(t){return{token:t.token,requestStatus:2,expiresIn:An(t.expiresIn),creationTime:Date.now()}}function ve(t,e){return p(this,null,function*(){let r=(yield e.json()).error;return N.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function Ee({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yn(t,{refreshToken:e}){let n=Ee(t);return n.append("Authorization",wn(e)),n}function Ie(t){return p(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function An(t){return Number(t.replace("s","000"))}function wn(t){return`${ge} ${t}`}function Nn(r,i){return p(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=he(t),s=Ee(t),a=e.getImmediate({optional:!0});if(a){let u=yield a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}let c={fid:n,authVersion:ge,appId:t.appId,sdkVersion:pe},f={method:"POST",headers:s,body:JSON.stringify(c)},l=yield Ie(()=>fetch(o,f));if(l.ok){let u=yield l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Te(u.authToken)}}else throw yield ve("Create Installation",l)})}function _e(t){return new Promise(e=>{setTimeout(e,t)})}function Rn(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var Cn=/^[cdef][\w-]{21}$/,vt="";function Mn(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=Pn(t);return Cn.test(n)?n:vt}catch{return vt}}function Pn(t){return Rn(t).substr(0,22)}function Y(t){return`${t.appName}!${t.appId}`}var Se=new Map;function be(t,e){let n=Y(t);ye(n,e),kn(n,e)}function ye(t,e){let n=Se.get(t);if(n)for(let r of n)r(e)}function kn(t,e){let n=Ln();n&&n.postMessage({key:t,fid:e}),On()}var w=null;function Ln(){return!w&&"BroadcastChannel"in self&&(w=new BroadcastChannel("[Firebase] FID Change"),w.onmessage=t=>{ye(t.data.key,t.data.fid)}),w}function On(){Se.size===0&&w&&(w.close(),w=null)}var Fn="firebase-installations-database",Dn=1,R="firebase-installations-store",ht=null;function It(){return ht||(ht=zt(Fn,Dn,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(R)}}})),ht}function J(t,e){return p(this,null,function*(){let n=Y(t),i=(yield It()).transaction(R,"readwrite"),o=i.objectStore(R),s=yield o.get(n);return yield o.put(e,n),yield i.done,(!s||s.fid!==e.fid)&&be(t,e.fid),e})}function Ae(t){return p(this,null,function*(){let e=Y(t),r=(yield It()).transaction(R,"readwrite");yield r.objectStore(R).delete(e),yield r.done})}function Q(t,e){return p(this,null,function*(){let n=Y(t),i=(yield It()).transaction(R,"readwrite"),o=i.objectStore(R),s=yield o.get(n),a=e(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&be(t,a.fid),a})}function _t(t){return p(this,null,function*(){let e,n=yield Q(t.appConfig,r=>{let i=Un(r),o=Bn(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===vt?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Un(t){let e=t||{fid:Mn(),registrationStatus:0};return we(e)}function Bn(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(N.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=xn(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qn(t)}:{installationEntry:e}}function xn(t,e){return p(this,null,function*(){try{let n=yield Nn(t,e);return J(t.appConfig,n)}catch(n){throw me(n)&&n.customData.serverCode===409?yield Ae(t.appConfig):yield J(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function qn(t){return p(this,null,function*(){let e=yield ue(t.appConfig);for(;e.registrationStatus===1;)yield _e(100),e=yield ue(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield _t(t);return r||n}return e})}function ue(t){return Q(t,e=>{if(!e)throw N.create("installation-not-found");return we(e)})}function we(t){return Vn(t)?{fid:t.fid,registrationStatus:0}:t}function Vn(t){return t.registrationStatus===1&&t.registrationTime+de<Date.now()}function $n(r,i){return p(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=zn(t,n),s=yn(t,n),a=e.getImmediate({optional:!0});if(a){let u=yield a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}let c={installation:{sdkVersion:pe,appId:t.appId}},f={method:"POST",headers:s,body:JSON.stringify(c)},l=yield Ie(()=>fetch(o,f));if(l.ok){let u=yield l.json();return Te(u)}else throw yield ve("Generate Auth Token",l)})}function zn(t,{fid:e}){return`${he(t)}/${e}/authTokens:generate`}function St(t,e=!1){return p(this,null,function*(){let n,r=yield Q(t.appConfig,o=>{if(!Ne(o))throw N.create("not-registered");let s=o.authToken;if(!e&&Kn(s))return o;if(s.requestStatus===1)return n=jn(t,e),o;{if(!navigator.onLine)throw N.create("app-offline");let a=Wn(o);return n=Hn(t,a),a}});return n?yield n:r.authToken})}function jn(t,e){return p(this,null,function*(){let n=yield le(t.appConfig);for(;n.authToken.requestStatus===1;)yield _e(100),n=yield le(t.appConfig);let r=n.authToken;return r.requestStatus===0?St(t,e):r})}function le(t){return Q(t,e=>{if(!Ne(e))throw N.create("not-registered");let n=e.authToken;return Xn(n)?D(S({},e),{authToken:{requestStatus:0}}):e})}function Hn(t,e){return p(this,null,function*(){try{let n=yield $n(t,e),r=D(S({},e),{authToken:n});return yield J(t.appConfig,r),n}catch(n){if(me(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield Ae(t.appConfig);else{let r=D(S({},e),{authToken:{requestStatus:0}});yield J(t.appConfig,r)}throw n}})}function Ne(t){return t!==void 0&&t.registrationStatus===2}function Kn(t){return t.requestStatus===2&&!Gn(t)}function Gn(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+In}function Wn(t){let e={requestStatus:1,requestTime:Date.now()};return D(S({},t),{authToken:e})}function Xn(t){return t.requestStatus===1&&t.requestTime+de<Date.now()}function Jn(t){return p(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield _t(e);return r?r.catch(console.error):St(e).catch(console.error),n.fid})}function Yn(t,e=!1){return p(this,null,function*(){let n=t;return yield Qn(n),(yield St(n,e)).token})}function Qn(t){return p(this,null,function*(){let{registrationPromise:e}=yield _t(t);e&&(yield e)})}function Zn(t){if(!t||!t.options)throw Tt("App Configuration");if(!t.name)throw Tt("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Tt(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Tt(t){return N.create("missing-app-config-values",{valueName:t})}var Re="installations",tr="installations-internal",er=t=>{let e=t.getProvider("app").getImmediate(),n=Zn(e),r=M(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},nr=t=>{let e=t.getProvider("app").getImmediate(),n=M(e,Re).getImmediate();return{getId:()=>Jn(n),getToken:i=>Yn(n,i)}};function rr(){B(new U(Re,er,"PUBLIC")),B(new U(tr,nr,"PRIVATE"))}rr();P(fe,Et);P(fe,Et,"esm2020");var Ce="@firebase/performance",Rt="0.7.9";var xe=Rt,ir="FB-PERF-TRACE-START",ar="FB-PERF-TRACE-STOP",Ct="FB-PERF-TRACE-MEASURE",qe="_wt_",Ve="_fp",$e="_fcp",ze="_fid",je="_lcp",or="lcp_element",He="_inp",sr="inp_interactionTarget",Ke="_cls",cr="cls_largestShiftTarget",Ge="@firebase/performance/config",We="@firebase/performance/configexpire",ur="performance",Xe="Performance";var lr={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},g=new j(ur,Xe,lr);var _=new $t(Xe);_.logLevel=Vt.INFO;var bt,Je,d=class t{constructor(e){if(this.window=e,!e)throw g.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=ce,this.onINP=se,this.onCLS=te}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Bt()?(_.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Dt()?!0:(_.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(let o of i.getEntries())n(o)}).observe({entryTypes:[e]})}static getInstance(){return bt===void 0&&(bt=new t(Je)),bt}};function fr(t){Je=t}var Ye;function dr(t){let e=t.getId();return e.then(n=>{Ye=n}),e}function Lt(){return Ye}function pr(t){let e=t.getToken();return e.then(n=>{}),e}function Me(t,e){let n=t.length-e.length;if(n<0||n>1)throw g.create("invalid String merger input");let r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var yt,m=class t{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Me("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Me("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12,this.logMaxFlushSize=40}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return yt===void 0&&(yt=new t),yt}};var tt=(function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t})(tt||{}),gr=["firebase_","google_","ga_"],mr=new RegExp("^[a-zA-Z]\\w*$"),hr=40,Mt=100;function Tr(){let t=d.getInstance().navigator;return t?.serviceWorker?t.serviceWorker.controller?2:3:1}function vr(){switch(d.getInstance().document.visibilityState){case"visible":return tt.VISIBLE;case"hidden":return tt.HIDDEN;default:return tt.UNKNOWN}}function Er(){let e=d.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Ir(t){return t.length===0||t.length>hr?!1:!gr.some(n=>t.startsWith(n))&&!!t.match(mr)}function _r(t){return t.length!==0&&t.length<=Mt}function Qe(t){let e=t.options?.appId;if(!e)throw g.create("no app id");return e}function Sr(t){let e=t.options?.projectId;if(!e)throw g.create("no project id");return e}function br(t){let e=t.options?.apiKey;if(!e)throw g.create("no api key");return e}var yr="0.0.1",T={loggingEnabled:!0},Ar="FIREBASE_INSTALLATIONS_AUTH";function wr(t,e){let n=Nr();return n?(Pe(n),Promise.resolve()):Mr(t,e).then(Pe).then(r=>Rr(r),()=>{})}function Nr(){let t=d.getInstance().localStorage;if(!t)return;let e=t.getItem(We);if(!e||!Pr(e))return;let n=t.getItem(Ge);if(n)try{return JSON.parse(n)}catch{return}}function Rr(t){let e=d.getInstance().localStorage;!t||!e||(e.setItem(Ge,JSON.stringify(t)),e.setItem(We,String(Date.now()+m.getInstance().configTimeToLive*60*60*1e3)))}var Cr="Could not fetch config, will use default configs";function Mr(t,e){return pr(t.installations).then(n=>{let r=Sr(t.app),i=br(t.app),o=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,s=new Request(o,{method:"POST",headers:{Authorization:`${Ar} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:Qe(t.app),app_version:xe,sdk_version:yr})});return fetch(s).then(a=>{if(a.ok)return a.json();throw g.create("RC response not ok")})}).catch(()=>{_.info(Cr)})}function Pe(t){if(!t)return t;let e=m.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=T.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):T.logSource&&(e.logSource=T.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:T.logEndPointUrl&&(e.logEndPointUrl=T.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:T.transportKey&&(e.transportKey=T.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):T.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=T.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):T.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=T.tracesSamplingRate),n.fpr_log_max_flush_size?e.logMaxFlushSize=Number(n.fpr_log_max_flush_size):T.logMaxFlushSize&&(e.logMaxFlushSize=T.logMaxFlushSize),e.logTraceAfterSampling=ke(e.tracesSamplingRate),e.logNetworkAfterSampling=ke(e.networkRequestsSamplingRate),t}function Pr(t){return Number(t)>Date.now()}function ke(t){return Math.random()<=t}var Ot=1,At;function Ze(t){return Ot=2,At=At||Lr(t),At}function kr(){return Ot===3}function Lr(t){return Or().then(()=>dr(t.installations)).then(e=>wr(t,e)).then(()=>Le(),()=>Le())}function Or(){let t=d.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){let n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function Le(){Ot=3}var tn=10*1e3,Fr=5.5*1e3,Dr=1e3,en=3,Ur=65536,Br=new TextEncoder,et=en,v=[],Oe=!1;function xr(){Oe||(Ft(Fr),Oe=!0)}function Ft(t){setTimeout(()=>{et<=0||(v.length>0&&qr(),Ft(tn))},t)}function qr(){let t=v.splice(0,Dr),e=Pt(t);Vr(e).then(()=>{et=en}).catch(()=>{v=[...t,...v],et--,_.info(`Tries left: ${et}.`),Ft(tn)})}function Pt(t){let e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:m.getInstance().logSource,log_event:e};return JSON.stringify(n)}function Vr(t){let e=m.getInstance().getFlTransportFullUrl();return Br.encode(t).length<=Ur&&navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t})}function $r(t){if(!t.eventTime||!t.message)throw g.create("invalid cc log");v=[...v,t]}function zr(t){return(...e)=>{let n=t(...e);$r({message:n,eventTime:Date.now()})}}function jr(){let t=m.getInstance().getFlTransportFullUrl();for(;v.length>0;){let e=v.splice(-m.getInstance().logMaxFlushSize),n=Pt(e);if(!(navigator.sendBeacon&&navigator.sendBeacon(t,n))){v=[...v,...e];break}}if(v.length>0){let e=Pt(v);fetch(t,{method:"POST",body:e}).catch(()=>{_.info("Failed flushing queued events.")})}}var V;function nn(t,e){V||(V={send:zr(Gr),flush:jr}),V.send(t,e)}function Z(t){let e=m.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||d.getInstance().requiredApisAvailable()&&(kr()?wt(t):Ze(t.performanceController).then(()=>wt(t),()=>wt(t)))}function Hr(){V&&V.flush()}function wt(t){if(!Lt())return;let e=m.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||nn(t,1)}function Kr(t){let e=m.getInstance();if(!e.instrumentationEnabled)return;let n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||nn(t,0)}function Gr(t,e){return e===0?Wr(t):Xr(t)}function Wr(t){let e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:rn(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function Xr(t){let e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);let n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);let r={application_info:rn(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function rn(t){return{google_app_id:Qe(t),app_instance_id:Lt(),web_app_info:{sdk_version:xe,page_url:d.getInstance().getUrl(),service_worker_status:Tr(),visibility_state:vr(),effective_connection_type:Er()},application_process_state:0}}function Fe(t,e){let n=e;if(!n||n.responseStart===void 0)return;let r=d.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),o=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,s=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],c={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:s};Kr(c)}var Jr=100,Yr="_",Qr=[Ve,$e,ze,je,Ke,He];function Zr(t,e){return t.length===0||t.length>Jr?!1:e&&e.startsWith(qe)&&Qr.indexOf(t)>-1||!t.startsWith(Yr)}function ti(t){let e=Math.floor(t);return e<t&&_.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}var $=class t{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=d.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${ir}-${this.randomId}-${this.name}`,this.traceStopMark=`${ar}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Ct}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw g.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw g.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Z(this)}record(e,n,r){if(e<=0)throw g.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw g.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=S({},r.attributes)),r&&r.metrics)for(let i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));Z(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(Zr(e,this.name))this.counters[e]=ti(n??0);else throw g.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){let r=Ir(e),i=_r(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw g.create("invalid attribute name",{attributeName:e});if(!i)throw g.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return S({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){let e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i,o){let s=d.getInstance().getUrl();if(!s)return;let a=new t(e,qe+s,!0),c=Math.floor(d.getInstance().getTimeOrigin()*1e3);a.setStartTime(c),n&&n[0]&&(a.setDuration(Math.floor(n[0].duration*1e3)),a.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),a.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),a.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));let f="first-paint",l="first-contentful-paint";if(r){let u=r.find(I=>I.name===f);u&&u.startTime&&a.putMetric(Ve,Math.floor(u.startTime*1e3));let h=r.find(I=>I.name===l);h&&h.startTime&&a.putMetric($e,Math.floor(h.startTime*1e3)),o&&a.putMetric(ze,Math.floor(o*1e3))}this.addWebVitalMetric(a,je,or,i.lcp),this.addWebVitalMetric(a,Ke,cr,i.cls),this.addWebVitalMetric(a,He,sr,i.inp),Z(a),Hr()}static addWebVitalMetric(e,n,r,i){i&&(e.putMetric(n,Math.floor(i.value*1e3)),i.elementAttribution&&(i.elementAttribution.length>Mt?e.putAttribute(r,i.elementAttribution.substring(0,Mt)):e.putAttribute(r,i.elementAttribution)))}static createUserTimingTrace(e,n){let r=new t(e,n,!1,n);Z(r)}};var nt={},De=!1,an;function Ue(t){Lt()&&(setTimeout(()=>ni(t),0),setTimeout(()=>ei(t),0),setTimeout(()=>ri(t),0))}function ei(t){let e=d.getInstance(),n=e.getEntriesByType("resource");for(let r of n)Fe(t,r);e.setupObserver("resource",r=>Fe(t,r))}function ni(t){let e=d.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>Nt(t)):e.document.addEventListener("unload",()=>Nt(t)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&Nt(t)}),e.onFirstInputDelay&&e.onFirstInputDelay(n=>{an=n}),e.onLCP(n=>{nt.lcp={value:n.value,elementAttribution:n.attribution?.element}}),e.onCLS(n=>{nt.cls={value:n.value,elementAttribution:n.attribution?.largestShiftTarget}}),e.onINP(n=>{nt.inp={value:n.value,elementAttribution:n.attribution?.interactionTarget}})}function ri(t){let e=d.getInstance(),n=e.getEntriesByType("measure");for(let r of n)Be(t,r);e.setupObserver("measure",r=>Be(t,r))}function Be(t,e){let n=e.name;n.substring(0,Ct.length)!==Ct&&$.createUserTimingTrace(t,n)}function Nt(t){if(!De){De=!0;let e=d.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");setTimeout(()=>{$.createOobTrace(t,n,r,nt,an)},0)}}var kt=class{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),d.getInstance().requiredApisAvailable()?Ut().then(n=>{n&&(xr(),Ze(this).then(()=>Ue(this),()=>Ue(this)),this.initialized=!0)}).catch(n=>{_.info(`Environment doesn't support IndexedDB: ${n}`)}):_.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){m.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return m.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){m.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return m.getInstance().dataCollectionEnabled}},ii="[DEFAULT]";function Ii(t=rt()){return t=H(t),M(t,"performance").getImmediate()}function _i(t,e){t=H(t);let n=M(t,"performance");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(qt(o,e??{}))return i;throw g.create("already initialized")}return n.initialize({options:e})}function Si(t,e){return t=H(t),new $(t,e)}var ai=(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==ii)throw g.create("FB not default");if(typeof window>"u")throw g.create("no window");fr(window);let i=new kt(n,r);return i._init(e),i};function oi(){B(new U("performance",ai,"PUBLIC")),P(Ce,Rt),P(Ce,Rt,"esm2020")}oi();export{Ii as a,_i as b,Si as c};
